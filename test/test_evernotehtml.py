import unittest
from rsstoevernote import evernotehtml

class EvernoteHtmlTest(unittest.TestCase):
    def test_findInlineElements(self):
        r = evernotehtml.EvernoteHtml("""
            <p><img src="http://www.liquidmatrix.org/blog/wp-content/uploads/2012/05/LSD_logo_headphone-300x300.jpg" title="LSD_logo_headphone" width="300" height="300" class="aligncenter size-medium wp-image-12149" /><br /> <!-- copy below this line for the libsyn posting--></p> <p><strong>Episode 0&#215;38</strong></p> <p><i>Dreidel Turkey Dreidel Peter Mackay!!!</i></p> <p>Can&#8217;t do HTML, can&#8217;t follow the instructions on how to write an introductory paragraph welcoming our listeners to the show notes that no one reads. Gotta love the stunt team.</p> <p>Upcoming this week&#8230;</p> <ol> <li>Lots of News</li> <li>Breaches, anti-derps!!</li> <li>It&#8217;s Chanukah!!!</li> <li>and many turkeys are now dead</li> <li>And there are weekly Briefs &#8211; no arguing or discussion allowed</li> </ol> <p>And if you&#8217;ve got commentary, please sent it to mailbag@liquidmatrix.org for us to check out.</p> <p><b>DISCLAIMER:</b> It&#8217;s not that explicit, but you may want to use headphones if you&#8217;re at work.</p> <p><b>ADDITIONAL DISCLAIMER:</b> In case it is unclear, this is the story of 5 opinionated infosec pros who have sufficient opinions of their own they don&#8217;t need to speak for anyone except themselves. Ok? Good.</p> <p>In this episode:</p> <p><!-- Most of the post is this unordered list --> <ul> <li>News and Commentary</li> <ol> <li><!-- Wil --><a href="http://www.renesys.com/2013/11/mitm-internet-hijacking/">Someone&#8217;s been MiTMing the internets&#8230;</a> <a href="http://threatpost.com/internet-traffic-following-malicious-detours-via-route-injection-attacks/102981">Bruce Schnier thinks Ars Technica had an okay write up about it&#8230; </a> <a href="http://allthingsd.com/20131120/how-somebody-forced-the-worlds-internet-traffic-through-belarus-and-iceland/">And more reporting on Renesys&#8217;s original research on it. </a> <a href="http://www.washingtonpost.com/blogs/the-switch/wp/2013/11/20/researchers-say-u-s-internet-traffic-was-re-routed-through-belarus-thats-a-problem/">(and a little more)</a></li> <li><!-- Cylon --><a href="http://www.japantimes.co.jp/news/2013/10/27/world/nsa-asked-japan-to-tap-regionwide-fiber-optic-cables-in-2011/#.UpNeUZFIaik">Japan is awesome, told NSA no thanks because it believed the request was illegal</a></li> <li><!-- Dave --><a href="http://blogs.csoonline.com/global-security/2839/canadas-bill-c-13-trojan-horse">Canada&#8217;s Bill C-13 is a Trojan Horse</a> <a href="http://www.michaelgeist.ca/content/view/7009/135/">(and Michael Geist weighs in too)</a> <a href="http://www.theglobeandmail.com/news/national/conservatives-using-proposed-cyberbullying-law-to-revive-old-controversy-critics-say/article15557926/">(and the Ontario privacy commissioner does comment on it)</a></li> </ol> <li>Breaches</li> <ol> <li><a href="http://metronews.ca/news/ottawa/861955/medical-marijuana-patients-outed-by-health-canada/">Health Canada doesn&#8217;t understand privacy</a> <a href="http://metronews.ca/news/ottawa/866836/b-c-law-firm-files-suit-against-health-canada-over-medical-marijuana-gaffe/">(and the bad things start happen)</a></li> <li><a href="http://agrinews-pubs.com/Content/News/Markets/Article/CME-Group-was-victim-of--cyber-intrusion--in-July/8/26/8922">Clearport Mercantile exchange (and the 450,000 daily contracts they process) got p0wned</a></li> <li><a href="http://www.techweekeurope.co.uk/news/european-parliament-wi-fi-man-in-the-middle-attack-132795">EU is not good with the Wifi</a></li> <p><!-- silly gag message for Lee --> </ol> <li>Anti-derps</li> <ol> <li><a href="http://arstechnica.com/tech-policy/2013/11/newegg-trial-crypto-legend-diffie-takes-the-stand-to-knock-out-patent/">Anti-DERP &#8211; Diffie is awesome! so is newegg</a> <a href="http://arstechnica.com/tech-policy/2013/11/jury-newegg-infringes-spangenberg-patent-must-pay-2-3-million/">(but sadly the lost &#8211; which sucks)</a></li> <li><a href="http://www.wired.com/threatlevel/2013/11/video-poker-case/">Anti-DERP &#8211; konami button press sequence is not a hack (it&#8217;s a metaphor)</a></li> <li><a href="http://m.xojane.com/it-happened-to-me/charlotte-laws-hunter-moore-erin-brockovich-revenge-porn">Anti-DERP &#8211; Mom takes on revenge porn site, a creepy hacker and Anonymous to the rescue</a></li> </ol> <li>Mailbag</li> <ol> <li>Hi Guys: <br /> 0&#215;37 was good &#8212; thanks! <br /> <p>During recording the podcast one of youse (Ben?) wanted to determine the version of Silverlight installed on a browser. I make Rapid7&#8242;s browserscan the home page for all of my browsers. It displays a nice list of the plugins currently installed &#038; enabled in your browser. The list includes the plugin&#8217;s installed version, the currently available version and &#8212; when appropriate &#8212; a Red Download Button in case you want to download the latest version.</p> <p> cheers, <br /> Mark <br /> <ol> <li><a href="https://browserscan.rapid7.com/scanme">Rapid 7&#8242;s Browserscan</a></li> <li><a href="https://browsercheck.qualys.com/?scan_type=js">Qualys</a></li> </ol> </li> </ol> <li>Briefly&nbsp;&#8211;&nbsp;NO ARGUING OR DISCUSSION ALLOWED</li> <ol> <li><!-- Wil --><a href="https://www.youtube.com/watch?v=fHRMSDPfE5A">Amber Baldet&#8217;s DefCon 21 talk on Suicide Risk Assesment and Intervention Tactics. </a></li> <li><!-- Cylon --><a href="http://geer.tinho.net/geer.nro.6xi13.txt">Dan Geer speaks more wisdom&#8230; go read it now</a></li> <li><!-- Cylon --><a href="http://i.imgur.com/Djqyzxp.gif">Awesome hack &#8211; private LCD</a></li> <li><!-- Dave --><a href"http://blogs.csoonline.com/malwarecybercrime/2846/bips-suffers-bitcoin-heist">BIPS suffers Bitcoin heist</a></li> </ol> <li>Liquidmatrix Staff Projects&nbsp;&#8211;&nbsp;<i>gratuitous self-promotion</i></li> <ol> <li><a href="http://archive.liquidmatrix.org">The Security Conference Library</a></li> <li>Contribute to the <a href="http://wiki.doinginfosecright.com">Strategic Defense Execution Standard (#SDES)</a>&nbsp;and you&#8217;ll be Doing Infosec Right in no time.</li> <li>If you&#8217;re interested in helping out with openCERT.ca, drop a line to info@openCERT.ca</li> </ol> <li>Upcoming Appearances: &nbsp;&#8211;&nbsp;<i>more gratuitous self-promotion</i></li> <ol> <li><b>Dave:</b>&nbsp;-&nbsp;<i>Attending Bluehat and Hushcon to close out the year. </i></li> <li><b>James:</b>&nbsp;-&nbsp;<i>Chicago, we think</i></li> <li><b>Ben:</b>&nbsp;-&nbsp;<i>nowhere in particular</i></li> <li><b>Matt:</b>&nbsp;-&nbsp;<i>Turkey coma</i></li> <li><b>Wil:</b>&nbsp;-&nbsp;<i>On location. He&#8217;s looking for representation so get him while he&#8217;s still cute&#8230;</i></li> <li><b>Other LSD Writers:</b>&nbsp;-&nbsp;<i>MIA</i></li> </ol> <li>Advertising&nbsp;-&nbsp;<i>pay the bills&#8230;</i></li> <ol> <li>Signing up for a SANS course? Be sure to use the code &#8220;Liquidmatrix_150&#8243; and save $150 off the course fee! And Liquidmatrix_5 for 5% off a course</li> <li>Seacrest Says: Tell Peter Mackay everything</li> </ol> </ul> <p><!-- For posting to Libsyn, you do not need the link sections here-but you should grab the copyright at the bottom --><br /> <a href="http://traffic.libsyn.com/liquidmatrix/LSDPodcast-38.mp3" target="_blank">Download the MP3</a><br /> <!-- For each posting, a new libsyn player link is generated.It must be copy&#038;pasted then modified to set the width and height to 320 and 180 respectively --><br /> Listen: <iframe style="border: none" src="//html5-player.libsyn.com/embed/episode/id/2577323/height/180/width/320/theme/legacy/direction/no/autoplay/no/autonext/no/thumbnail/yes/preload/no/no_addthis/no/" height="180" width="320" scrolling="no" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe><br /> <!-- Here's the links to subscribe to the RSS feed and iTunes feed --></p> <p>Subscribe to us using plain old <a href="http://liquidmatrix.libsyn.com/rss"><img src="http://www.liquidmatrix.org/blog/wp-content/uploads/2012/06/xml.png" alt="" title="xml" width="36" height="14" class="aligncenter size-full wp-image-12192" /></a></p> <p>Also, we&#8217;re now available through <a href="http://itunes.apple.com/ca/podcast/liquidmatrix-security-digest/id533166516"><img src="http://www.liquidmatrix.org/blog/wp-content/uploads/2012/06/itunes.gif" alt="" title="itunes" width="61" height="15" class="aligncenter size-full wp-image-12193" /></a></p> <p><!-- The copyright notice -->Creative Commons license: BY-NC-SA</p> <p>The post <a href="http://www.liquidmatrix.org/blog/2013/12/02/liquidmatrix-security-digest-podcast-episode-38/">Liquidmatrix Security Digest Podcast &#8211; Episode 38</a> appeared first on <a href="http://www.liquidmatrix.org/blog">Liquidmatrix Security Digest</a>.</p>
            """)
        for inlineElement in r.prohibitedinlineelements:
            self.assertEqual(r.html_doc.find(inlineElement+ "=\""), -1)

    def test_findProhibitedElements(self):
        r = evernotehtml.EvernoteHtml("""
            <p><img src="http://www.liquidmatrix.org/blog/wp-content/uploads/2012/05/LSD_logo_headphone-300x300.jpg" title="LSD_logo_headphone" width="300" height="300" class="aligncenter size-medium wp-image-12149" /><br /> <!-- copy below this line for the libsyn posting--></p> <p><strong>Episode 0&#215;38</strong></p> <p><i>Dreidel Turkey Dreidel Peter Mackay!!!</i></p> <p>Can&#8217;t do HTML, can&#8217;t follow the instructions on how to write an introductory paragraph welcoming our listeners to the show notes that no one reads. Gotta love the stunt team.</p> <p>Upcoming this week&#8230;</p> <ol> <li>Lots of News</li> <li>Breaches, anti-derps!!</li> <li>It&#8217;s Chanukah!!!</li> <li>and many turkeys are now dead</li> <li>And there are weekly Briefs &#8211; no arguing or discussion allowed</li> </ol> <p>And if you&#8217;ve got commentary, please sent it to mailbag@liquidmatrix.org for us to check out.</p> <p><b>DISCLAIMER:</b> It&#8217;s not that explicit, but you may want to use headphones if you&#8217;re at work.</p> <p><b>ADDITIONAL DISCLAIMER:</b> In case it is unclear, this is the story of 5 opinionated infosec pros who have sufficient opinions of their own they don&#8217;t need to speak for anyone except themselves. Ok? Good.</p> <p>In this episode:</p> <p><!-- Most of the post is this unordered list --> <ul> <li>News and Commentary</li> <ol> <li><!-- Wil --><a href="http://www.renesys.com/2013/11/mitm-internet-hijacking/">Someone&#8217;s been MiTMing the internets&#8230;</a> <a href="http://threatpost.com/internet-traffic-following-malicious-detours-via-route-injection-attacks/102981">Bruce Schnier thinks Ars Technica had an okay write up about it&#8230; </a> <a href="http://allthingsd.com/20131120/how-somebody-forced-the-worlds-internet-traffic-through-belarus-and-iceland/">And more reporting on Renesys&#8217;s original research on it. </a> <a href="http://www.washingtonpost.com/blogs/the-switch/wp/2013/11/20/researchers-say-u-s-internet-traffic-was-re-routed-through-belarus-thats-a-problem/">(and a little more)</a></li> <li><!-- Cylon --><a href="http://www.japantimes.co.jp/news/2013/10/27/world/nsa-asked-japan-to-tap-regionwide-fiber-optic-cables-in-2011/#.UpNeUZFIaik">Japan is awesome, told NSA no thanks because it believed the request was illegal</a></li> <li><!-- Dave --><a href="http://blogs.csoonline.com/global-security/2839/canadas-bill-c-13-trojan-horse">Canada&#8217;s Bill C-13 is a Trojan Horse</a> <a href="http://www.michaelgeist.ca/content/view/7009/135/">(and Michael Geist weighs in too)</a> <a href="http://www.theglobeandmail.com/news/national/conservatives-using-proposed-cyberbullying-law-to-revive-old-controversy-critics-say/article15557926/">(and the Ontario privacy commissioner does comment on it)</a></li> </ol> <li>Breaches</li> <ol> <li><a href="http://metronews.ca/news/ottawa/861955/medical-marijuana-patients-outed-by-health-canada/">Health Canada doesn&#8217;t understand privacy</a> <a href="http://metronews.ca/news/ottawa/866836/b-c-law-firm-files-suit-against-health-canada-over-medical-marijuana-gaffe/">(and the bad things start happen)</a></li> <li><a href="http://agrinews-pubs.com/Content/News/Markets/Article/CME-Group-was-victim-of--cyber-intrusion--in-July/8/26/8922">Clearport Mercantile exchange (and the 450,000 daily contracts they process) got p0wned</a></li> <li><a href="http://www.techweekeurope.co.uk/news/european-parliament-wi-fi-man-in-the-middle-attack-132795">EU is not good with the Wifi</a></li> <p><!-- silly gag message for Lee --> </ol> <li>Anti-derps</li> <ol> <li><a href="http://arstechnica.com/tech-policy/2013/11/newegg-trial-crypto-legend-diffie-takes-the-stand-to-knock-out-patent/">Anti-DERP &#8211; Diffie is awesome! so is newegg</a> <a href="http://arstechnica.com/tech-policy/2013/11/jury-newegg-infringes-spangenberg-patent-must-pay-2-3-million/">(but sadly the lost &#8211; which sucks)</a></li> <li><a href="http://www.wired.com/threatlevel/2013/11/video-poker-case/">Anti-DERP &#8211; konami button press sequence is not a hack (it&#8217;s a metaphor)</a></li> <li><a href="http://m.xojane.com/it-happened-to-me/charlotte-laws-hunter-moore-erin-brockovich-revenge-porn">Anti-DERP &#8211; Mom takes on revenge porn site, a creepy hacker and Anonymous to the rescue</a></li> </ol> <li>Mailbag</li> <ol> <li>Hi Guys: <br /> 0&#215;37 was good &#8212; thanks! <br /> <p>During recording the podcast one of youse (Ben?) wanted to determine the version of Silverlight installed on a browser. I make Rapid7&#8242;s browserscan the home page for all of my browsers. It displays a nice list of the plugins currently installed &#038; enabled in your browser. The list includes the plugin&#8217;s installed version, the currently available version and &#8212; when appropriate &#8212; a Red Download Button in case you want to download the latest version.</p> <p> cheers, <br /> Mark <br /> <ol> <li><a href="https://browserscan.rapid7.com/scanme">Rapid 7&#8242;s Browserscan</a></li> <li><a href="https://browsercheck.qualys.com/?scan_type=js">Qualys</a></li> </ol> </li> </ol> <li>Briefly&nbsp;&#8211;&nbsp;NO ARGUING OR DISCUSSION ALLOWED</li> <ol> <li><!-- Wil --><a href="https://www.youtube.com/watch?v=fHRMSDPfE5A">Amber Baldet&#8217;s DefCon 21 talk on Suicide Risk Assesment and Intervention Tactics. </a></li> <li><!-- Cylon --><a href="http://geer.tinho.net/geer.nro.6xi13.txt">Dan Geer speaks more wisdom&#8230; go read it now</a></li> <li><!-- Cylon --><a href="http://i.imgur.com/Djqyzxp.gif">Awesome hack &#8211; private LCD</a></li> <li><!-- Dave --><a href"http://blogs.csoonline.com/malwarecybercrime/2846/bips-suffers-bitcoin-heist">BIPS suffers Bitcoin heist</a></li> </ol> <li>Liquidmatrix Staff Projects&nbsp;&#8211;&nbsp;<i>gratuitous self-promotion</i></li> <ol> <li><a href="http://archive.liquidmatrix.org">The Security Conference Library</a></li> <li>Contribute to the <a href="http://wiki.doinginfosecright.com">Strategic Defense Execution Standard (#SDES)</a>&nbsp;and you&#8217;ll be Doing Infosec Right in no time.</li> <li>If you&#8217;re interested in helping out with openCERT.ca, drop a line to info@openCERT.ca</li> </ol> <li>Upcoming Appearances: &nbsp;&#8211;&nbsp;<i>more gratuitous self-promotion</i></li> <ol> <li><b>Dave:</b>&nbsp;-&nbsp;<i>Attending Bluehat and Hushcon to close out the year. </i></li> <li><b>James:</b>&nbsp;-&nbsp;<i>Chicago, we think</i></li> <li><b>Ben:</b>&nbsp;-&nbsp;<i>nowhere in particular</i></li> <li><b>Matt:</b>&nbsp;-&nbsp;<i>Turkey coma</i></li> <li><b>Wil:</b>&nbsp;-&nbsp;<i>On location. He&#8217;s looking for representation so get him while he&#8217;s still cute&#8230;</i></li> <li><b>Other LSD Writers:</b>&nbsp;-&nbsp;<i>MIA</i></li> </ol> <li>Advertising&nbsp;-&nbsp;<i>pay the bills&#8230;</i></li> <ol> <li>Signing up for a SANS course? Be sure to use the code &#8220;Liquidmatrix_150&#8243; and save $150 off the course fee! And Liquidmatrix_5 for 5% off a course</li> <li>Seacrest Says: Tell Peter Mackay everything</li> </ol> </ul> <p><!-- For posting to Libsyn, you do not need the link sections here-but you should grab the copyright at the bottom --><br /> <a href="http://traffic.libsyn.com/liquidmatrix/LSDPodcast-38.mp3" target="_blank">Download the MP3</a><br /> <!-- For each posting, a new libsyn player link is generated.It must be copy&#038;pasted then modified to set the width and height to 320 and 180 respectively --><br /> Listen: <iframe style="border: none" src="//html5-player.libsyn.com/embed/episode/id/2577323/height/180/width/320/theme/legacy/direction/no/autoplay/no/autonext/no/thumbnail/yes/preload/no/no_addthis/no/" height="180" width="320" scrolling="no" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe><br /> <!-- Here's the links to subscribe to the RSS feed and iTunes feed --></p> <p>Subscribe to us using plain old <a href="http://liquidmatrix.libsyn.com/rss"><img src="http://www.liquidmatrix.org/blog/wp-content/uploads/2012/06/xml.png" alt="" title="xml" width="36" height="14" class="aligncenter size-full wp-image-12192" /></a></p> <p>Also, we&#8217;re now available through <a href="http://itunes.apple.com/ca/podcast/liquidmatrix-security-digest/id533166516"><img src="http://www.liquidmatrix.org/blog/wp-content/uploads/2012/06/itunes.gif" alt="" title="itunes" width="61" height="15" class="aligncenter size-full wp-image-12193" /></a></p> <p><!-- The copyright notice -->Creative Commons license: BY-NC-SA</p> <p>The post <a href="http://www.liquidmatrix.org/blog/2013/12/02/liquidmatrix-security-digest-podcast-episode-38/">Liquidmatrix Security Digest Podcast &#8211; Episode 38</a> appeared first on <a href="http://www.liquidmatrix.org/blog">Liquidmatrix Security Digest</a>.</p>
            """)
        for prohibitedElement in r.prohibitedelements:
            self.assertEqual(r.html_doc.find("<"+prohibitedElement+">"), -1)
            self.assertEqual(r.html_doc.find("</"+prohibitedElement+">"), -1)

if __name__ == "__main__":
    unittest.main()